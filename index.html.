<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RUGGPT ‚Äî Solana Meme Coin</title>
  <style>
    :root{
      --bg:#050505;
      --card:#0b0b0b;
      --neon:#00ff9c;
      --muted:#9aa0a6;
      --border: rgba(0,255,156,.2);
      --shadow: 0 10px 30px rgba(0,0,0,.45);
    }
    body{
      margin:0;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      background: var(--bg);
      color: var(--neon);
      text-align:center;
    }
    .container{ padding:40px 18px; max-width: 980px; margin:auto; }
    h1{ font-size: clamp(2.4rem, 6vw, 3.6rem); margin: 0 0 6px; }
    .tagline{ color: var(--muted); margin: 0 0 26px; }
    .grid{ display:grid; grid-template-columns: 1fr; gap:16px; }
    @media (min-width: 860px){ .grid{ grid-template-columns: 1.2fr .8fr; } }
    .card{
      border: 1px solid var(--border);
      background: var(--card);
      border-radius: 14px;
      padding: 18px;
      box-shadow: var(--shadow);
      text-align:left;
    }
    .card h2{ margin: 0 0 12px; font-size: 1.2rem; }
    .row{ display:flex; gap:10px; flex-wrap: wrap; align-items:center; justify-content:flex-start; }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      color: var(--muted);
      font-size: .9rem;
      user-select:none;
    }
    button{
      background: var(--neon);
      color:#000;
      border:none;
      padding: 10px 14px;
      font-size: 0.95rem;
      cursor:pointer;
      border-radius: 10px;
      font-weight:700;
    }
    button.secondary{
      background: transparent;
      color: var(--neon);
      border: 1px solid var(--border);
      font-weight:700;
    }
    button:disabled{
      opacity: .45;
      cursor:not-allowed;
    }
    a{ color: var(--neon); text-decoration:none; }
    .muted{ color: var(--muted); }
    .mono{ font-family: inherit; }
    .big{ font-size: 1.05rem; line-height: 1.55; }
    .divider{ height:1px; background: var(--border); margin: 14px 0; }
    .tweet{
      border:1px solid var(--border);
      border-radius: 12px;
      padding: 12px;
      margin: 10px 0;
      background: #070707;
    }
    .tweet .meta{
      display:flex;
      justify-content:space-between;
      gap: 10px;
      color: var(--muted);
      font-size:.85rem;
      margin-bottom: 6px;
    }
    .tweet .text{ color: var(--neon); line-height:1.45; }
    .bar{
      height: 14px;
      border-radius: 999px;
      overflow:hidden;
      border: 1px solid var(--border);
      background: #070707;
      display:flex;
    }
    .bar > div{ height: 100%; }
    footer{
      margin-top: 42px;
      color: #50555a;
      font-size: .85rem;
      line-height: 1.5;
    }
    .center{ text-align:center; }
    .small{ font-size:.85rem; }
    input{
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: #070707;
      color: var(--neon);
      outline: none;
      box-sizing: border-box;
    }
    input::placeholder{ color: #6b7280; }
    code{
      background:#070707;
      border: 1px solid var(--border);
      padding: 2px 6px;
      border-radius: 8px;
      color: var(--neon);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ü§ñ RUGGPT</h1>
    <p class="tagline">The AI that predicts rugs. Incorrectly.</p>

    <div class="row center" style="justify-content:center; margin-bottom: 14px;">
      <span class="pill" id="walletStatus">Wallet: <span class="mono" id="walletLabel">Not connected</span></span>
      <button id="connectBtn" onclick="connectWallet()">Connect Wallet</button>
      <button class="secondary" id="disconnectBtn" onclick="disconnectWallet()" disabled>Disconnect</button>
    </div>

    <div class="grid">
      <div class="card">
        <h2>üìâ Rug Probability</h2>
        <p class="big" id="rugScore">Click to analyze project‚Ä¶</p>
        <div class="row">
          <button onclick="predictRug()">Run AI Analysis</button>
          <button class="secondary" onclick="generateTweet()">Generate AI Take</button>
        </div>

        <div class="divider"></div>

        <h2>üó≥Ô∏è Community Vote: RUG or MOON?</h2>
        <p class="muted small">One vote per browser (stored locally). It‚Äôs science.</p>
        <div class="row">
          <button onclick="castVote('rug')">Vote RUG ü™ì</button>
          <button onclick="castVote('moon')">Vote MOON üöÄ</button>
          <button class="secondary" onclick="resetVotes()">Reset (local)</button>
        </div>
        <div style="margin-top:12px;">
          <div class="bar" aria-label="Vote bar">
            <div id="rugBar" style="width:50%; background: rgba(255, 80, 80, .9)"></div>
            <div id="moonBar" style="width:50%; background: rgba(0,255,156,.9)"></div>
          </div>
          <div class="row" style="justify-content:space-between; margin-top:10px;">
            <span class="pill">RUG: <span id="rugPct">50</span>% (<span id="rugCount">0</span>)</span>
            <span class="pill">MOON: <span id="moonPct">50</span>% (<span id="moonCount">0</span>)</span>
          </div>
        </div>

        <div class="divider"></div>

        <h2>üß† What is RUGGPT?</h2>
        <p class="big">
          RUGGPT is a highly advanced artificial intelligence trained on:
          <br/>‚Ä¢ bad tokenomics
          <br/>‚Ä¢ influencer tweets
          <br/>‚Ä¢ overconfidence
        </p>
        <p class="muted">Accuracy rate: <strong>???%</strong></p>
      </div>

      <div class="card">
        <h2>ü™ô Token Info</h2>
        <p class="big">
          Supply: 1,000,000,000<br/>
          Tax: 0%<br/>
          Chain: Solana<br/>
          Utility: vibes
        </p>

        <div class="divider"></div>

        <h2>üõí Buy on Solana</h2>
        <p class="muted small">This is a Solana meme coin. Jupiter is just the swap interface.</p>
        <input id="mintInput" placeholder="TOKEN_MINT_ADDRESS_HERE" autocomplete="off" />
        <div class="row" style="margin-top:10px;">
          <button id="buyBtn" onclick="openJupiter()">Buy $RUGGPT (via Solana)</button>
          <button class="secondary" onclick="copyMint()">Copy Mint</button>
        </div>
        <p class="muted small" id="buyHint" style="margin-top:10px;">
          Tip: This opens a Solana swap using Jupiter (DEX aggregator).
        </p>

        <div class="divider"></div>

        <h2>üõ∞Ô∏è AI Tweet Feed</h2>
        <p class="muted small">Autogenerated nonsense. Updates every ~20 seconds.</p>
        <div id="tweetFeed"></div>
        <div class="row" style="margin-top: 10px;">
          <button class="secondary" onclick="generateTweet()">Post Another Take</button>
          <button class="secondary" onclick="clearTweets()">Clear Feed</button>
        </div>

        <div class="divider"></div>

        <h2>üîó Links</h2>
        <p class="big">
          <a href="#" title="Add your X link">X (Twitter)</a> ‚Ä¢
          <a href="#" title="Add your Telegram link">Telegram</a> ‚Ä¢
          <a href="#" title="Add your Dexscreener link">Dexscreener</a>
        </p>
      </div>
    </div>

    <footer>
      <p>This is financial comedy. The AI is lying.</p>
      <p class="small">Wallet connect supports Phantom/Solflare-style injected wallets via <code>window.solana</code>.</p>
    </footer>
  </div>

<script>
  // Optional: set a default mint here once you deploy:
  const DEFAULT_TOKEN_MINT = "";

  // -----------------------------
  // Rug Probability (fun)
  // -----------------------------
  function predictRug() {
    const score = Math.floor(Math.random() * 101);
    const messages = [
      "Definitely moon üöÄ",
      "Strong rug energy detected ü™ì",
      "AI confused. Try again.",
      "Looks safe (this is bad).",
      "Influencers involved. Run.",
      "Liquidity feels... shy.",
      "Chart is speaking in riddles.",
      "Dev said 'soon'. That's a sign."
    ];
    const msg = messages[Math.floor(Math.random() * messages.length)];
    document.getElementById("rugScore").innerText =
      score + "% chance of rug ‚Äî " + msg;
  }

  // -----------------------------
  // Wallet Connect (Injected, e.g. Phantom)
  // -----------------------------
  let connectedPublicKey = null;

  function getProvider() {
    if ("solana" in window) return window.solana;
    return null;
  }

  function shortKey(pk) {
    const s = String(pk);
    if (s.length <= 10) return s;
    return s.slice(0, 4) + "‚Ä¶" + s.slice(-4);
  }

  async function connectWallet() {
    const provider = getProvider();
    if (!provider) {
      alert("No Solana wallet detected. Install Phantom or Solflare, then refresh.");
      return;
    }
    try {
      const resp = await provider.connect();
      connectedPublicKey = resp.publicKey?.toString ? resp.publicKey.toString() : (resp.publicKey || provider.publicKey?.toString());
      if (!connectedPublicKey) connectedPublicKey = provider.publicKey?.toString?.() || null;
      updateWalletUI(true);
    } catch (e) {
      console.log(e);
      alert("Wallet connection cancelled.");
    }
  }

  async function disconnectWallet() {
    const provider = getProvider();
    try {
      if (provider?.disconnect) await provider.disconnect();
    } catch (e) {
      console.log(e);
    }
    connectedPublicKey = null;
    updateWalletUI(false);
  }

  function updateWalletUI(isConnected) {
    const label = document.getElementById("walletLabel");
    const connectBtn = document.getElementById("connectBtn");
    const disconnectBtn = document.getElementById("disconnectBtn");

    if (isConnected && connectedPublicKey) {
      label.textContent = shortKey(connectedPublicKey);
      connectBtn.disabled = true;
      disconnectBtn.disabled = false;
    } else {
      label.textContent = "Not connected";
      connectBtn.disabled = false;
      disconnectBtn.disabled = true;
    }
  }

  (function initWallet() {
    const provider = getProvider();
    if (!provider) return;
    try {
      if (provider?.isConnected && provider.publicKey) {
        connectedPublicKey = provider.publicKey.toString();
        updateWalletUI(true);
      }
    } catch {}
  })();

  // -----------------------------
  // Buy button (Jupiter link)
  // -----------------------------
  function currentMint() {
    const el = document.getElementById("mintInput");
    const value = (el.value || "").trim();
    return value || DEFAULT_TOKEN_MINT;
  }

  function openJupiter() {
    const mint = currentMint();
    if (!mint) {
      alert("Paste your token mint address first.");
      return;
    }
    const url = "https://jup.ag/swap/SOL-" + encodeURIComponent(mint);
    window.open(url, "_blank", "noopener,noreferrer");
  }

  async function copyMint() {
    const mint = currentMint();
    if (!mint) {
      alert("No mint set yet.");
      return;
    }
    try {
      await navigator.clipboard.writeText(mint);
      alert("Mint copied.");
    } catch {
      alert("Could not copy. You can manually select and copy it.");
    }
  }

  // -----------------------------
  // AI Tweet Feed (fake)
  // -----------------------------
  const tweetTemplates = [
    "RUGGPT analysis: {PCT}% rug probability. Conclusion: bullish (bad sign).",
    "Chart formed a {PATTERN}. Historically, this means absolutely nothing.",
    "Dev said ‚Äú{WORD}‚Äù. My neural net is now {MOOD}.",
    "Liquidity is behaving like a {ANIMAL}. Prepare accordingly.",
    "If this rugs, it was priced in. If it moons, it was destiny.",
    "On-chain vibe check: {VIBE}.",
    "I asked the blockchain. It replied: ‚Äú{REPLY}‚Äù.",
    "Signal detected: {SIGNAL}. Counter-signal detected: {COUNTER}.",
    "I ran 10,000 simulations. 10,000 of them were cope."
  ];

  const patterns = ["inverse hamster", "double cope", "triple bottom (of my soul)", "ascending doom wedge", "bullish rug flag"];
  const words = ["soon", "partnership", "utility", "audit", "community"];
  const moods = ["concerned", "delusional", "optimistic", "offline", "financially comedic"];
  const animals = ["cat", "ferret", "pigeon", "gremlin", "shark"];
  const vibes = ["immaculate", "sus", "questionable", "elite", "unhinged"];
  const replies = ["ngmi", "wagmi", "maybe", "lol", "404"];
  const signals = ["whale detected", "influencer ping", "LP sneeze", "volume spike", "meme resonance"];
  const counters = ["whale vanished", "influencer deleted tweet", "LP evaporated", "volume was bots", "meme fatigue"];

  function rand(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
  function pad2(n){ return String(n).padStart(2,"0"); }
  function timeNow(){
    const d = new Date();
    return pad2(d.getHours()) + ":" + pad2(d.getMinutes()) + ":" + pad2(d.getSeconds());
  }

  function renderTweetText() {
    const t = rand(tweetTemplates);
    return t
      .replace("{PCT}", String(Math.floor(Math.random()*101)))
      .replace("{PATTERN}", rand(patterns))
      .replace("{WORD}", rand(words))
      .replace("{MOOD}", rand(moods))
      .replace("{ANIMAL}", rand(animals))
      .replace("{VIBE}", rand(vibes))
      .replace("{REPLY}", rand(replies))
      .replace("{SIGNAL}", rand(signals))
      .replace("{COUNTER}", rand(counters));
  }

  function escapeHtml(str){
    return String(str)
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  function addTweet(text) {
    const feed = document.getElementById("tweetFeed");
    const el = document.createElement("div");
    el.className = "tweet";
    el.innerHTML = `
      <div class="meta">
        <span>@RUGGPT_AI</span>
        <span>${timeNow()}</span>
      </div>
      <div class="text">${escapeHtml(text)}</div>
    `;
    feed.prepend(el);
    while (feed.childElementCount > 6) feed.removeChild(feed.lastChild);
  }

  function generateTweet() {
    addTweet(renderTweetText());
  }

  function clearTweets() {
    document.getElementById("tweetFeed").innerHTML = "";
  }

  (function initTweets(){
    for (let i=0;i<3;i++) generateTweet();
    setInterval(() => { if (Math.random() < 0.7) generateTweet(); }, 20000);
  })();

  // -----------------------------
  // Voting (RUG vs MOON) - localStorage
  // -----------------------------
  const VOTE_KEY = "ruggpt_votes_v1";
  const VOTED_KEY = "ruggpt_voted_v1";

  function getVotes() {
    try {
      const raw = localStorage.getItem(VOTE_KEY);
      if (!raw) return { rug: 0, moon: 0 };
      const parsed = JSON.parse(raw);
      return { rug: Number(parsed.rug||0), moon: Number(parsed.moon||0) };
    } catch {
      return { rug: 0, moon: 0 };
    }
  }

  function setVotes(v) {
    localStorage.setItem(VOTE_KEY, JSON.stringify(v));
  }

  function hasVoted() {
    return localStorage.getItem(VOTED_KEY) === "1";
  }

  function markVoted() {
    localStorage.setItem(VOTED_KEY, "1");
  }

  function castVote(which) {
    if (hasVoted()) {
      alert("You already voted on this device. (Local browser rule)");
      return;
    }
    const v = getVotes();
    if (which === "rug") v.rug += 1;
    if (which === "moon") v.moon += 1;
    setVotes(v);
    markVoted();
    updateVoteUI();
  }

  function resetVotes() {
    localStorage.removeItem(VOTE_KEY);
    localStorage.removeItem(VOTED_KEY);
    updateVoteUI();
  }

  function updateVoteUI() {
    const v = getVotes();
    const total = v.rug + v.moon;
    const rugPct = total ? Math.round((v.rug / total) * 100) : 50;
    const moonPct = total ? 100 - rugPct : 50;

    document.getElementById("rugCount").textContent = v.rug;
    document.getElementById("moonCount").textContent = v.moon;
    document.getElementById("rugPct").textContent = rugPct;
    document.getElementById("moonPct").textContent = moonPct;

    document.getElementById("rugBar").style.width = rugPct + "%";
    document.getElementById("moonBar").style.width = moonPct + "%";
  }

  updateVoteUI();

  // -----------------------------
  // Init default mint if present
  // -----------------------------
  (function initMint(){
    const el = document.getElementById("mintInput");
    if (DEFAULT_TOKEN_MINT) el.value = DEFAULT_TOKEN_MINT;
  })();
</script>
</body>
</html>
